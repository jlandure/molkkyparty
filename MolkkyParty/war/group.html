<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>MolkkyParty</title>
    <meta name="description" content="MolkkyParty">
    <meta name="author" content="JLE">

    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link rel="stylesheet" href="css/bootstrap.css">
</head>
<body>
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">MolkkyParty - JS</a>
          <div class="nav-collapse">

          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row">
        <div class="span4">
          <h1>Data</h1>
          <div id="results">
            <p id="spinner"></p>
          </div>
        </div>
        <div class="span7">
          <h2>Code</h2>
          <p>
          <pre><code></code>
          </pre>
          </p>

        </div> 
      </div>

      <hr>

      <footer>
        <p>
          <img src="https://developers.google.com/images/developers-logo.png" class="quimby_search_image">  &copy; Google 2012

        </p>
      </footer>

    </div> <!-- /container -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>

    <script src="js/libs/bootstrap/bootstrap.min.js"></script>

    <script type="text/javascript">
    
    
function showList(data) {
  if (data && data.items) { 
    var groups = data.items;
    var users = groups[0].users;
    var items = [];
    $.each(groups, function(key, val) {
      var details = "<div class='beerDetails'><pre>";
      for (var prop in val) {
    	  if(!($.isArray(val[prop]))) {
            details += prop + ": " + val[prop] + "<br/>";
    	  }
      }
      details += "</pre></div>";
      items.push('<li>' + val.name + 
        '</span> - Id: ' + val.id + '<br/>' + details + '</li>');
    });
    
    $.each(users, function(key, val) {
        var UsersDetails = "<div class='beerDetails'><pre>";
        for (var prop in val) {
        	UsersDetails += prop + ": " + val[prop] + "<br/>";
        }
        UsersDetails += "</pre></div>";
        items.push('<li> Users' + 
          '</span> <br/>' + UsersDetails + '</li>');
      });

    $('<ol/>', {
      'class': 'beerItem',
      html: items.join('')
    }).appendTo('#results');
  }
}

var apiUrl = "http://localhost:8888/api/molkkyparty/v1/group";
$.ajax({
  url: apiUrl,
  dataType: 'json',
  contentType: 'application/json',
  type: "GET",
  success: function(data) {
    $('#results').html('');
    showList(data);
  },
  error: function(xhr, ajaxOptions, thrownError) {
    console.error("Beer list error: " + xhr.status) + " err: " + thrownError;
    $('<h3/>', {
        html: "Could not find beers"
      }).appendTo('#results');
  }
 
});
    
    </script>

  </body>
</html>